class r{constructor(t={}){this.startTime=0,this.currentStep=0,this.steps=[],this.callbacks={},this.options={showSkeleton:!0,trackProgress:!0,minDuration:500,maxDuration:1e4,...t}}setSteps(t){return this.steps=t,this.currentStep=0,this}onStepChange(t){return this.callbacks.onStepChange=t,this}onComplete(t){return this.callbacks.onComplete=t,this}onError(t){return this.callbacks.onError=t,this}onWarning(t){return this.callbacks.onWarning=t,this}async start(){this.startTime=Date.now(),this.currentStep=0;const t=setTimeout(()=>{this.callbacks.onWarning&&this.callbacks.onWarning("La operación está tardando más de lo esperado...")},this.options.maxDuration);try{if(this.steps.length>0)for(let e=0;e<this.steps.length;e++){this.currentStep=e;const s=this.steps[e],i=(e+1)/this.steps.length*100;this.callbacks.onStepChange&&this.callbacks.onStepChange(s,i),s.duration&&await this.delay(s.duration)}clearTimeout(t)}catch(e){throw clearTimeout(t),this.callbacks.onError&&e instanceof Error&&this.callbacks.onError(e),e}}async complete(){const t=Date.now()-this.startTime;t<this.options.minDuration&&await this.delay(this.options.minDuration-t),this.callbacks.onComplete&&this.callbacks.onComplete()}async execute(t){await this.start();try{const e=await t();return await this.complete(),e}catch(e){throw this.callbacks.onError&&e instanceof Error&&this.callbacks.onError(e),e}}getProgress(){return this.steps.length===0?0:(this.currentStep+1)/this.steps.length*100}getCurrentStep(){return this.steps[this.currentStep]||null}delay(t){return new Promise(e=>setTimeout(e,t))}}function n(a){return new r(a)}const o={AUTH:[{id:"keychain",message:"Verificando Hive Keychain",duration:500},{id:"account",message:"Verificando cuenta en Hive",duration:1e3},{id:"signature",message:"Esperando firma digital",duration:2e3},{id:"session",message:"Creando sesión segura",duration:500}],DELEGATIONS:[{id:"fetch",message:"Obteniendo delegaciones",duration:1500},{id:"process",message:"Procesando datos",duration:800},{id:"calculate",message:"Calculando estadísticas",duration:600},{id:"render",message:"Preparando visualización",duration:400}],PAYMENTS:[{id:"validate",message:"Validando parámetros",duration:300},{id:"calculate",message:"Calculando distribución",duration:1200},{id:"prepare",message:"Preparando transacciones",duration:800},{id:"broadcast",message:"Enviando a la blockchain",duration:2e3}]};export{r as LoadingManager,o as LoadingSteps,n as createLoadingManager};
