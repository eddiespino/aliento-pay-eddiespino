const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/Container.WlziK8FN.js","_astro/index.BYO3pZyk.js","_astro/preload-helper.BlTxHScW.js","_astro/HiveAccountService.D7iZ8Fsv.js"])))=>i.map(i=>d[i]);
import{_ as u}from"./preload-helper.BlTxHScW.js";import{getHiveAvatarUrl as g}from"./HiveAccountService.D7iZ8Fsv.js";let c=!1,a=null,d=null;async function m(){if(c){console.log("âš ï¸ Header ya inicializado, saltando...");return}return a?(console.log("â³ Esperando inicializaciÃ³n en progreso..."),a):(d&&(d.abort(),console.log("ğŸš« Cancelando requests HTTP previos")),d=new AbortController,console.log("ğŸ”„ Inicializando header (versiÃ³n robusta)..."),a=(async()=>{try{const{container:e}=await u(async()=>{const{container:t}=await import("./Container.WlziK8FN.js");return{container:t}},__vite__mapDeps([0,1,2,3])),n=e.getAuthenticationUseCase(),s=e.getDelegationsUseCase(),i=document.getElementById("user-greeting"),r=document.getElementById("user-avatar-img"),l=document.getElementById("logout-btn"),o=n.getCurrentUser();if(!o){console.log("ğŸ“ No hay usuario autenticado en header");return}if(i&&(i.textContent=`@${o}`),r){const t=g(o);r.src=t,r.alt=`@${o}`}if(l){l.replaceWith(l.cloneNode(!0));const t=document.getElementById("logout-btn");t&&(t.onclick=()=>{n.logout(),window.location.href="/"})}c=!0,console.log("âœ… Header inicializado correctamente")}catch(e){if(e instanceof Error&&e.name==="AbortError"){console.log("ğŸš« InicializaciÃ³n cancelada");return}console.warn("Error inicializando header:",e)}finally{a=null}})(),a)}function f(e=3,n=100){if(c){console.log("âš ï¸ Header ya inicializado, saltando retry...");return}let s=0;function i(){const r=document.getElementById("user-greeting"),l=document.getElementById("user-avatar-img"),o=document.getElementById("logout-btn");if(r||l||o){console.log("âœ… Elementos del header encontrados, inicializando..."),m();return}const t=localStorage.getItem("authenticated_user");if(!t){console.log("ğŸ“ No hay usuario autenticado, no se necesita inicializar header");return}s<e?(s++,console.log(`ğŸ”„ Reintentando inicializaciÃ³n del header (${s}/${e})`),setTimeout(i,n)):(console.warn("âš ï¸ No se pudo inicializar el header - elementos no encontrados"),console.log("ğŸ” Elementos buscados:",{userGreeting:!!document.getElementById("user-greeting"),userAvatar:!!document.getElementById("user-avatar-img"),logoutBtn:!!document.getElementById("logout-btn"),authUser:!!t}))}i()}function y(){if(c){console.log("âš ï¸ Header ya configurado, saltando...");return}console.log("ğŸ”§ Configurando inicializaciÃ³n del header...");function e(n){console.log(`ğŸ“¡ Header: ${n} event`),f()}document.addEventListener("DOMContentLoaded",()=>e("DOMContentLoaded")),document.addEventListener("astro:page-load",()=>{c=!1,a=null,e("Astro page load")}),document.addEventListener("aliento:page-ready",()=>e("PÃ¡gina lista")),(document.readyState==="complete"||document.readyState==="interactive")&&(console.log("âš¡ Header: PÃ¡gina ya lista, inicializando inmediatamente"),setTimeout(()=>e("Inmediata"),50))}y();
